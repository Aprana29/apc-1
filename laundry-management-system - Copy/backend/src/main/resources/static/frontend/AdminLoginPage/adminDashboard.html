<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Admin Dashboard - DhobiWaala</title>
  <style>
    body { font-family: 'Segoe UI', sans-serif; margin:0; background:linear-gradient(135deg,#f76b1c,#f5a623); color:#333; }

    /* Navbar */
    .navbar { display:flex; justify-content:space-between; align-items:center; padding:1rem 2rem; background:#1c1c1c; color:#fff; position:sticky; top:0; z-index:100; }
    .logo-text { font-size:1.5rem; font-weight:bold; color:#f5a623; }
    #logoutBtn { background:#f76b1c; border:none; padding:0.5rem 1rem; color:#fff; border-radius:5px; cursor:pointer; font-weight:bold; }
    #logoutBtn:hover { background:#f5a623; }

    /* Dashboard */
    .dashboard-container { max-width:1000px; margin:2rem auto; background:#fff; padding:2rem; border-radius:10px; box-shadow:0 0 15px rgba(0,0,0,0.2); }
    .dashboard-container h2 { color:#f76b1c; margin-bottom:1rem; }
    .admin-info { background:#fdf2e9; padding:1rem; border-radius:8px; margin-bottom:2rem; }
    .admin-info p { margin:0.3rem 0; font-weight:500; }

    .admin-actions { display:flex; gap:1rem; flex-wrap:wrap; }
    .action-card { flex:1 1 200px; background:#fff7f0; padding:1.5rem; border-radius:10px; text-align:center; cursor:pointer; border:1px solid #f5a623; transition:transform 0.2s, background 0.2s; }
    .action-card:hover { transform:translateY(-5px); background:#fce8d5; }
    a { text-decoration:none; color:inherit; display:block; }
  </style>
</head>
<body>


  <!-- Navbar -->
  <header class="navbar">
    <span class="logo-text"><i>DhobiWaala</i> Admin</span>
    <button id="logoutBtn">Logout</button>
  </header>
  <script>
  // ‚úÖ Logout functionality
  document.getElementById("logoutBtn").addEventListener("click", () => {
    sessionStorage.removeItem("adminToken");
    window.location.href = "../AdminLoginPage/adminLogin.html";
  });
</script>


  <!-- Dashboard -->
  <div class="dashboard-container">
    <h2>Welcome, Admin!</h2>
    <div class="admin-info">
      <p><strong>Name:</strong> Aprana Thakur</p>
      <p><strong>Email:</strong> admin@onlinelaundry.com</p>
      <p><strong>Role:</strong> Administrator</p>
    </div>

    <div class="admin-actions">
      <a href="manageUsers.html"><div class="action-card">üë• Manage Users</div></a>
      <a href="manageOrders.html"><div class="action-card">üì¶ Manage Orders</div></a>
      <a href="manageServices.html"><div class="action-card">üß∫ Manage Services</div></a>
      <a href="viewReports.html"><div class="action-card">üìä View Reports</div></a>
    </div>
  </div>

<script>
  // Toggle password visibility
  function togglePassword() {
    const pwdField = document.getElementById("password");
    const toggleBtn = document.querySelector(".toggle-password");
    if (pwdField.type === "password") {
      pwdField.type = "text";
      toggleBtn.textContent = "Hide";
    } else {
      pwdField.type = "password";
      toggleBtn.textContent = "Show";
    }
  }

  // Signup logic with backend
  const form = document.getElementById("signup-form");
  form.addEventListener("submit", async (e) => {
    e.preventDefault();

    const name = document.getElementById("name").value.trim();
    const email = document.getElementById("email").value.trim();
    const roll = document.getElementById("roll").value.trim();
    const hostel = document.getElementById("hostel").value.trim();
    const password = document.getElementById("password").value.trim();

    if (!name || !email || !roll || !hostel || !password) return;

    try {
      const response = await fetch("http://localhost:8080/api/users/register", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ name, email, roll, hostel, password })
      });

      if (response.ok) {
        document.getElementById("signup-success").style.display = "block";
        document.getElementById("signup-error").style.display = "none";

        setTimeout(() => {
          window.location.href = "../LoginPage/login.html";
        }, 1500);
      } else if (response.status === 400) {
        document.getElementById("signup-error").textContent = "‚ùå Email already registered!";
        document.getElementById("signup-error").style.display = "block";
        document.getElementById("signup-success").style.display = "none";
      } else {
        document.getElementById("signup-error").textContent = "‚ùå Signup failed. Try again.";
        document.getElementById("signup-error").style.display = "block";
        document.getElementById("signup-success").style.display = "none";
      }
    } catch (err) {
      console.error("Signup error:", err);
      document.getElementById("signup-error").textContent = "‚ö†Ô∏è Server not reachable!";
      document.getElementById("signup-error").style.display = "block";
      document.getElementById("signup-success").style.display = "none";
    }
  });
</script>

</body>
</html>
